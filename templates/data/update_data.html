{% extends "base_generic.html" %}

{% block content %}
{% load static %}
<section class="jumbotron jumbotron-fluid" id="main">
    <!-- Actualizar/modificar datos -->
    <!-- Datos de sondeo + imágenes -->
    {% if action == "update" %}
    {% if not error %}
    <h2 class="display-5">Actualizar datos</h2>
    <form action="{% url 'modify_data' %}" method="post">
        {% csrf_token %}
        {% for field in data %}
        <input hidden=true type="number" name="ID" value="{{ field.ID }}" />
        <table class="jumbotron jumbotron-fluid" style="margin-left: auto; margin-right: auto; width: 75%;">
            <tr>
                <td><label for="project_id">Proyecto: </label></td>
                <td><input type="search" id="project_id" name="project_id" value="{{ field.project_id }}"
                        required="True" />
                </td>

                <td><label for="northing ">Coordenada Norte:</label></td>
                <td><input type="number" id="northing" name="northing" min="0" step="0.001"
                        valueAsNumber="{{ field.northing }}" required="True" /></td>

            <tr>
                <td><label for="DH_id">Nombre del sondeo: </label></td>
                <td><input type="text" id="DH_id" name="DH_id" value="{{ field.DH_id }}" required="True" /></td>

                <td><label for="easting">Coordenada Este:</label></td>
                <td><input type="number" id="easting" name="easting" min="0" step="0.001" value="'{{ field.easting }}'"
                        required="True" /></td>

            </tr>
            <tr>
                <td> <label for="start_date">Fecha de inicio:</label></td>
                <td><input type="date" name="start_date" id="start_date" value="{{ field.start_date}}"
                        required="True" /></td>

                <td><label for="elevation">Elevación:</label></td>
                <td><input type="number" id="elevation" name="elevation" step="0.001" value="{{ field.elevation }}"
                        required="True" /></td>
            </tr>
            <tr>
                <td><label for="end_date">Fecha de finalización:</label></td>
                <td><input type="date" name="end_date" id="end_date" value="{{ field.end_date }}" required="True" />
                </td>

                <td><label for="UTM_Zone">Zona UTM:</label></td>
                <td><input list="UTM-zones" id="UTM_Zone" name="UTM_Zone" value="{{ field.UTM_Zone }}"
                        required="True" />
                    <datalist id="UTM_zones">
                        <datalist id=UTM-zones>
                            <option value="1N">1N</option>
                            <option value="1S">1S</option>
                            <option value="2N">2N</option>
                            <option value="2S">2S</option>
                            <option value="3N">3N</option>
                            <option value="3S">3S</option>
                            <option value="4N">4N</option>
                            <option value="4S">4S</option>
                            <option value="5N">5N</option>
                            <option value="5S">5S</option>
                            <option value="6N">6N</option>
                            <option value="6S">6S</option>
                            <option value="7N">7N</option>
                            <option value="7S">7S</option>
                            <option value="8N">8N</option>
                            <option value="8S">8S</option>
                            <option value="9N">9N</option>
                            <option value="9S">9S</option>
                            <option value="10N">10N</option>
                            <option value="10S">10S</option>
                            <option value="11N">11N</option>
                            <option value="11S">11S</option>
                            <option value="12N">12N</option>
                            <option value="12S">12S</option>
                            <option value="13N">13N</option>
                            <option value="13S">13S</option>
                            <option value="14N">14N</option>
                            <option value="14S">14S</option>
                            <option value="15N">15N</option>
                            <option value="15S">15S</option>
                            <option value="16N">16N</option>
                            <option value="16S">16S</option>
                            <option value="17N">17N</option>
                            <option value="17S">17S</option>
                            <option value="18N">18N</option>
                            <option value="18S">18S</option>
                            <option value="19N">19N</option>
                            <option value="19S">19S</option>
                            <option value="20N">20N</option>
                            <option value="20S">20S</option>
                            <option value="21N">21N</option>
                            <option value="21S">21S</option>
                            <option value="22N">22N</option>
                            <option value="22S">22S</option>
                            <option value="23N">23N</option>
                            <option value="23S">23S</option>
                            <option value="24N">24N</option>
                            <option value="24S">24S</option>
                            <option value="25N">25N</option>
                            <option value="25S">25S</option>
                            <option value="26N">26N</option>
                            <option value="26S">26S</option>
                            <option value="27N">27N</option>
                            <option value="27S">27S</option>
                            <option value="28N">28N</option>
                            <option value="28S">28S</option>
                            <option value="29N">29N</option>
                            <option value="29S">29S</option>
                            <option value="29S">29S</option>
                            <option value="30N">30N</option>
                            <option value="30S">30S</option>
                            <option value="31N">31N</option>
                            <option value="31S">31S</option>
                            <option value="32N">32N</option>
                            <option value="32S">32S</option>
                            <option value="33N">33N</option>
                            <option value="33S">33S</option>
                            <option value="34N">34N</option>
                            <option value="34S">34S</option>
                            <option value="35N">35N</option>
                            <option value="35S">35S</option>
                            <option value="36N">36N</option>
                            <option value="36S">36S</option>
                            <option value="37N">37N</option>
                            <option value="37S">37S</option>
                            <option value="38N">38N</option>
                            <option value="38S">38S</option>
                            <option value="39N">39N</option>
                            <option value="39S">39S</option>
                            <option value="40N">40N</option>
                            <option value="40S">40S</option>
                            <option value="41N">41N</option>
                            <option value="41S">41S</option>
                            <option value="42N">42N</option>
                            <option value="42S">42S</option>
                            <option value="43N">43N</option>
                            <option value="43S">43S</option>
                            <option value="44N">44N</option>
                            <option value="44S">44S</option>
                            <option value="45N">45N</option>
                            <option value="45S">45S</option>
                            <option value="46N">46N</option>
                            <option value="46S">46S</option>
                            <option value="47N">47N</option>
                            <option value="47S">47S</option>
                            <option value="48N">48N</option>
                            <option value="48S">48S</option>
                            <option value="49N">49N</option>
                            <option value="49S">49S</option>
                            <option value="50N">50N</option>
                            <option value="50S">50S</option>
                            <option value="51N">51N</option>
                            <option value="51S">51S</option>
                            <option value="52N">52N</option>
                            <option value="52S">52S</option>
                            <option value="53N">53N</option>
                            <option value="53S">53S</option>
                            <option value="54N">54N</option>
                            <option value="54S">54S</option>
                            <option value="55N">55N</option>
                            <option value="55S">55S</option>
                            <option value="56N">56N</option>
                            <option value="56S">56S</option>
                            <option value="57N">57N</option>
                            <option value="57S">57S</option>
                            <option value="58N">58N</option>
                            <option value="58S">58S</option>
                            <option value="59N">59N</option>
                            <option value="59S">59S</option>
                            <option value="60N">60N</option>
                            <option value="60S">60S</option>
                            </select>
                </td>
            </tr>
            <tr>
                <td><label for="teo_azimuth">Azimut teórico:</label></td>
                <td><input type="number" id="teo_azimuth" name="teo_azimuth" min="0" step="0.001"
                        value="{{ field.teo_azimuth }}" required="True" /></td>

                <td><label for="real_azimuth">Azimut real:</label></td>
                <td><input type="number" id="real_azimuth" name="real_azimuth" min="0" step="0.001"
                        value="{{ field.real_azimuth }}" /></td>
            </tr>
            <tr>
                <td><label for="teo_incl">Inclinación teórica:</label></td>
                <td><input type="number" id="teo_incl" name="teo_incl" step="0.001" value="{{ field.teo_incl }}"
                        required="True" /></td>

                <td><label for="real_incl">Inclinación real:</label></td>
                <td><input type="number" id="real_incl" name="real_incl" step="0.001" value="{{ field.real_incl }}" />
                </td>
            </tr>
        </table>
        {% endfor %}
        <section class="button-bar">
            <button class="btn btn-primary" type="submit" value="update" name="action" method = post>Actualizar datos </button>
            <a href="javascript:history.go(-1)" class="btn btn-secondary">Volver</a>
        </section>
    </form>
    {% endif %}
    {% if error %}
    <h2 class="display-5">Actualizar datos</h2>
    <section class="alert alert-danger" id="error_box">
        <p>Error al actualizar los datos.</p>
        <p>{{ error }}</p>
    </section>
    {% endif %}
    {% endif %}

    <!-- 
            Borrar datos 
        -->
    {% if action == "delete" %}
    <section class="alert alert-danger" id="error_box">
        <h2 class="display-5" style="text-align: center;">Borrar datos</h2>
        {% for field in data %}
        <table class="table table-striped">
            <tr>
                <td><b>Proyecto:</b></td>
                <td>{{ field.project }}</td>

                <td><b>Coordenada Norte:</b></td>
                <td>{{ field.northing }}</td>

            <tr>
                <td><b>Nombre del sondeo:</b></td>
                <td>{{ field.DH_id }}</td>

                <td><b>Coordenada Este:</b></td>
                <td>{{ field.easting }}</td>
            </tr>
            <tr>
                <td><b>Fecha de inicio:</b></td>
                <td>{{ field.start_date}}</td>

                <td><b>Elevación:</b></td>
                <td>{{ field.elevation }}</td>
            </tr>
            <tr>
                <td><b>Fecha de finalización:</b></td>
                <td>{{ field.end_date }}</td>

                <td><b>Zona UTM:</b></td>
                <td>{{ field.UTM_Zone }}</td>
            </tr>
            <tr>
                <td><b>Azimut teórico:</b></td>
                <td>{{ field.teo_azimuth }}</td>

                <td><b>Azimut real:</b></td>
                <td>{{ field.real_azimuth }}</td>
            </tr>
            <tr>
                <td><b>Inclinación teórica:</b></td>
                <td>{{ field.teo_incl }}</td>

                <td><b>Inclinación real:</b></td>
                <td>{{ field.real_incl }}</td>
            </tr>
        </table>
        {% endfor %}
        <form action="{% url 'modify_data' %}" method="post" class="button-bar">
            {% csrf_token %}
            {% for field in data %}
            <input hidden=true type="number" name="ID" value="{{ field.ID }}" />
            <button class="btn btn-danger" type="submit" value="delete" name="action">Borrar datos </button>
            <a href="javascript:history.go(-1)" class="btn btn-secondary">Volver</a>
            {% endfor %}
        </form>
    </section>
    {% endif %}
    <!-- 
            Visualizar datos 
        -->
    {% if action == "info" %}
    <h2 class="display-5" style="text-align: center;">Visualizar datos</h2>
    {% for field in data %}
    <table class="table table-striped">
        <tr>
            <td><b>Proyecto:</b></td>
            <td>{{ field.project_id }}</td>

            <td><b>Coordenada Norte:</b></td>
            <td>{{ field.northing }}</td>

        <tr>
            <td><b>Nombre del sondeo:</b></td>
            <td>{{ field.DH_id }}</td>

            <td><b>Coordenada Este:</b></td>
            <td>{{ field.easting }}</td>
        </tr>
        <tr>
            <td><b>Fecha de inicio:</b></td>
            <td>{{ field.start_date}}</td>

            <td><b>Elevación:</b></td>
            <td>{{ field.elevation }}</td>
        </tr>
        <tr>
            <td><b>Fecha de finalización:</b></td>
            <td>{{ field.end_date }}</td>

            <td><b>Zona UTM:</b></td>
            <td>{{ field.UTM_Zone }}</td>
        </tr>
        <tr>
            <td><b>Azimut teórico:</b></td>
            <td>{{ field.teo_azimuth }}</td>

            <td><b>Azimut real:</b></td>
            <td>{{ field.real_azimuth }}</td>
        </tr>
        <tr>
            <td><b>Inclinación teórica:</b></td>
            <td>{{ field.teo_incl }}</td>

            <td><b>Inclinación real:</b></td>
            <td>{{ field.real_incl }}</td>
        </tr>
    </table>
    <section style="display: inline-block; padding-top: 25px;">
        <table>
            <td style="margin-top: auto; margin-bottom: auto;">
                <tr>
                    <form action="{% url 'show_desv' %}" method="get">
                        {% csrf_token %}
                        <input type="text" value="{{ field.project_id }}" id="project_id" name="project_id"
                            hidden="true">
                        <input type="text" value="{{ field.DH_id }}" id="DH_id" name="DH_id" hidden="true">
                        <button class="btn btn-dark" style="margin-left: 50px;"> <span class="fa fa-arrows-v"></span>
                            Ver datos de desvios</button>
                    </form>
                </tr>
                <tr>
                    <form action="{% url 'show_samples' %}" method="get">
                        {% csrf_token %}
                        <input type="text" value="{{ field.project_id }}" id="project_id" name="project_id"
                            hidden="true">
                        <input type="text" value="{{ field.DH_id }}" id="DH_id" name="DH_id" hidden="true">
                        <button class="btn btn-dark" style="margin-left: 50px;"> <span class="fa fa-bar-chart"></span>
                            Ver datos de muestras</button>
                    </form>
                </tr>
                <tr>
                    <form action="{% url 'show_images' %}" method="get">
                        {% csrf_token %}
                        <input type="text" value="{{ field.project_id }}" id="project_id" name="project_id"
                            hidden="true">
                        <input type="text" value="{{ field.DH_id }}" id="DH_id" name="DH_id" hidden="true">
                        <button class="btn btn-primary" style="margin-left: 50px;"> <span
                                class="fa fa-picture-o"></span> Ver imágenes</button>
                    </form>
                </tr>
                <tr>
                    <form action="{% url 'show_images' %}" method="post">
                        {% csrf_token %}
                        <input type="text" value="{{ field.project_id }}" id="project_id" name="project_id"
                            hidden="true">
                        <input type="text" value="{{ field.DH_id }}" id="DH_id" name="DH_id" hidden="true">
                        <button class="btn btn-success" style="margin-left: 50px;"> <span class="fa fa-magic"></span>
                            Procesar
                            imágenes</button>
                    </form>
                </tr>
            </td>
        </table>
        <section style="margin-left: auto; margin-right: auto; padding-top: 50px;">
            <a href="javascript:history.go(-1)" class="btn btn-secondary" style="margin-left: 50px;">Volver</a>

        </section>
        {% endfor %}
        {% endif %}
        {% endblock %}